{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://ai-ready.dev/schemas/plugin-manifest.json",
  "title": "Claude Plugin Manifest",
  "description": "Schema for plugin.json files that define individual Claude Code plugins",
  "type": "object",
  "required": ["name"],
  "errorMessage": {
    "type": "must be an object",
    "required": {
      "name": "Missing required field: \"name\""
    }
  },
  "properties": {
    "name": {
      "type": "string",
      "minLength": 1,
      "pattern": "^[a-z][a-z0-9-]*$",
      "description": "Unique plugin identifier (kebab-case, no spaces)",
      "errorMessage": {
        "type": "Field \"name\" must be a string",
        "minLength": "Field \"name\" must not be empty",
        "pattern": "Field \"name\" must be kebab-case (lowercase letters, numbers, hyphens)"
      }
    },
    "version": {
      "type": "string",
      "description": "Plugin version (semver format recommended)",
      "errorMessage": {
        "type": "Field \"version\" must be a string"
      }
    },
    "description": {
      "type": "string",
      "description": "Brief description of what the plugin does",
      "errorMessage": {
        "type": "Field \"description\" must be a string"
      }
    },
    "author": {
      "oneOf": [
        { "type": "string" },
        {
          "type": "object",
          "properties": {
            "name": { "type": "string" },
            "email": { "type": "string", "format": "email" },
            "url": { "type": "string", "format": "uri" }
          }
        }
      ],
      "description": "Plugin author information",
      "errorMessage": "Field \"author\" must be a string or an object with name/email/url"
    },
    "homepage": {
      "type": "string",
      "format": "uri",
      "description": "URL to plugin documentation",
      "errorMessage": {
        "format": "Field \"homepage\" must be a valid URL"
      }
    },
    "repository": {
      "oneOf": [
        { "type": "string" },
        {
          "type": "object",
          "properties": {
            "type": { "type": "string" },
            "url": { "type": "string" }
          }
        }
      ],
      "description": "Source code repository"
    },
    "license": {
      "type": "string",
      "description": "SPDX license identifier"
    },
    "keywords": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Discovery tags for categorization"
    },
    "commands": {
      "oneOf": [
        {
          "type": "string",
          "pattern": "^\\./",
          "description": "Path to commands directory (must start with ./)"
        },
        {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^\\./",
            "description": "Path to command file (must start with ./)"
          },
          "description": "Array of command file paths"
        }
      ],
      "description": "Custom command file/directory paths (relative to plugin root, must start with ./)",
      "errorMessage": "Field \"commands\" must be a path starting with ./ or an array of such paths"
    },
    "agents": {
      "oneOf": [
        {
          "type": "string",
          "pattern": "^\\./",
          "description": "Path to agents directory (must start with ./)"
        },
        {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^\\./",
            "description": "Path to agent file (must start with ./)"
          },
          "description": "Array of agent file paths"
        }
      ],
      "description": "Agent definition file paths (relative to plugin root, must start with ./)",
      "errorMessage": "Field \"agents\" must be a path starting with ./ or an array of such paths"
    },
    "hooks": {
      "oneOf": [
        {
          "type": "string",
          "pattern": "^\\./",
          "description": "Path to hooks configuration file (must start with ./)"
        },
        {
          "type": "object",
          "description": "Inline hooks configuration"
        }
      ],
      "description": "Hook configuration path or inline JSON (paths must start with ./)",
      "errorMessage": "Field \"hooks\" must be a path starting with ./ or an inline configuration object"
    },
    "mcpServers": {
      "oneOf": [
        {
          "type": "string",
          "pattern": "^\\./",
          "description": "Path to MCP server configuration file (must start with ./)"
        },
        {
          "type": "object",
          "description": "Inline MCP server configuration"
        }
      ],
      "description": "MCP server configuration path or inline JSON (paths must start with ./)",
      "errorMessage": "Field \"mcpServers\" must be a path starting with ./ or an inline configuration object"
    }
  },
  "additionalProperties": true
}
